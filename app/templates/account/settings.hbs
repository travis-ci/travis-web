<section class='user-settings'>
  <section>
    <h3>API authentication</h3>

    <p>To learn more about using our API, please head to <a href='https://developer.travis-ci.com'>developer.travis-ci.com</a>.</p>

    {{account-token account=model}}
  </section>

  {{#if features.betaFeatures}}
    <section>
      <h3>Features</h3>
      <ul class="features-list">
        {{#each (sort-by "name" featureFlags) as |feature|}}
          {{beta-feature feature=feature}}
        {{else}}
          Oops! It looks like we don't have any experimental features for you
          to try yet.
        {{/each}}
      </ul>
    </section>
  {{/if}}

  <section class="email-settings">
    <h3>Email notifications</h3>
    <div class="build-emails">
      <div class="row">
        <div class="name">Build emails</div>
        <div class="description">
          The status of your build straight to your inbox
        </div>
        <div class="controls">
          {{travis-switch
            active=buildEmails
            disabled=toggleBuildEmails.isRunning
            onToggle=(perform toggleBuildEmails)
          }}
        </div>
      </div>
    </div>
    {{#if unsubscribedRepos.length}}
      <div class="unsubscribed-emails">
        {{#paper-block title="Email notifications you've unsubscribed from" elevation=2 padding=false}}
          {{#each unsubscribedRepos as |repo|}}
            <div class="row">
              <div class="name">
                {{repo.owner.login}} / {{repo.name}}
              </div>
              <div class="description"></div>
              <div class="controls">
                <button class="button--white button--compact unsubscribe-button">
                  {{svg-jar 'icon-email' class="icon" width="15px"}} Re-subscribe
                </button>
              </div>
            </div>
          {{/each}}
        {{/paper-block}}
      </div>
    {{/if}}
  </section>
</section>
