{{#if this.subscription.isStripe}}
  <section class="contact">
    {{#let this.subscription.billingInfo as |info|}}
      <div class="billing-subscription-section">
        <h3>
          Contact details
        </h3>
        {{#if this.openEditContactForm}}
          <div data-test-edit-contact-address-form='true' class="edit-form">
            <TravisForm
              class="edit-form"
              @onSubmit={{perform this.editContact}}
              as |form|
            >
              <div class='flex flex--col flex-md-row'>
                <div class="form-elem inline-form-elem">
                  <form.field
                    @label="First Name"
                    @value={{info.firstName}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.firstName)}}
                    as |field|
                  >
                    <field.input name="firstname" placeholder="First Name" />
                  </form.field>
                </div>
                <div class="form-elem">
                  <form.field
                    @label="Last Name"
                    @value={{info.lastName}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.lastName)}}
                    as |field|
                  >
                    <field.input name="lastname" placeholder="Last Name" />
                  </form.field>
                </div>
              </div>
              <div class='flex flex--col flex-md-row'>
                <div class="form-elem inline-form-elem">
                  <form.field
                    @label="Company"
                    @value={{info.company}}
                    @required={{false}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.company)}}
                    as |field|
                  >
                    <field.input name="company" placeholder="Company" />
                  </form.field>
                </div>
                <div class="form-elem">
                  <form.field
                    @label="Email"
                    @value={{info.billingEmail}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.billingEmail)}}
                    as |field|
                  >
                    <field.input name="billingEmail" placeholder="Email" />
                  </form.field>
                </div>
              </div>
              <div class="form-elem">
                {{#if this.editContact.isRunning}}
                  <LoadingIndicator />
                {{else}}
                  <div class="flex flex--wrap">
                    <button data-test-update-contact-address-button='true' onclick={{form.submit}} class="button--blue">
                      Edit contact details
                    </button>
                    <a data-test-cancel-contact-address-button='true' 
                      onClick={{action (toggle 'openEditContactForm' this)}} class='link cancel-link'
                    >
                      Cancel
                    </a>
                  </div>
                {{/if}}
              </div>
            </TravisForm>
          </div>
        {{else}}
          <div data-test-user-details='true' class="flex flex--space-between flex--wrap">
            <section>
              <h4>contact name</h4>
              <p>{{info.firstName}} {{info.lastName}}</p>
            </section>
            <section>
              <h4>company name</h4>
              {{#if info.company}}
                <p>{{info.company}}</p>
              {{/if}}
            </section>
            <section>
              <h4>billing email</h4>
              {{#if info.billingEmail}}
                <p>{{info.billingEmail}}</p>
              {{/if}}
            </section>
          </div>
          <button class='button--blue billing-subscription__buttons' 
            onClick={{action (toggle 'openEditContactForm' this)}} data-test-edit-contact-address='true'
          >
            Edit contact details
          </button>   
        {{/if}}
      </div>
      <hr />
      <div class="billing-subscription-section">
        <h3>
          Billing details
        </h3>
        {{#if this.openEditBillingForm}}
          <div class="edit-form" data-test-edit-billing-address-form='true'>
            <TravisForm
              @onSubmit={{perform this.editContact}}
              as |form|
            >
              <div class='flex flex--col flex-md-row'>
                <div class="form-elem inline-form-elem">
                  <form.field
                    @label="Street Address"
                    @value={{info.address}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.address)}}
                    as |field|
                  >
                    <field.input name="address" placeholder="Address" />
                  </form.field>
                </div>
                <div class='form-elem'>
                  <form.field
                    @label='Country'
                    @value={{info.country}}
                    @required={{true}}
                    class='billing-country'
                    @showRequiredMark={{true}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.country)}}
                    as |field|
                  >
                    <field.select
                      @placeholder='Select country'
                      @options={{this.countries}} 
                      as |country|
                    >
                      {{country}}
                    </field.select>
                  </form.field>
                </div>
              </div>
              <div class='flex flex--col flex-md-row'>
                <div class="form-elem inline-form-elem">
                  <form.field
                    @label="City"
                    @value={{info.city}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.city)}}
                    as |field|
                  >
                    <field.input name="city" placeholder="City" />
                  </form.field>
                </div>
                <div class="form-elem">
                  <form.field
                    @label="Post Code"
                    @value={{info.zipCode}}
                    @required={{true}}
                    @validateOnField={{false}}
                    @showValidationStatusIcons={{false}}
                    @onChange={{action (mut info.zipCode)}}
                    as |field|
                  >
                    <field.input name="postCode" placeholder="Post Code" />
                  </form.field>
                </div>  
              </div>
              <div class="form-elem">
                {{#if this.editContact.isRunning}}
                  <LoadingIndicator />
                {{else}}
                  <div class="flex flex--wrap">
                    <button data-test-update-billing-address-button='true' onclick={{form.submit}} class="button--blue">
                      Edit billing details
                    </button>
                    <a data-test-cancel-billing-address-button='true' onClick={{action (toggle 'openEditBillingForm' this)}} class='link cancel-link'>
                      Cancel
                    </a>
                  </div>
                {{/if}}
              </div>
            </TravisForm>
          </div>
        {{else}}
          <div data-test-billing-details='true' class="flex flex--space-between flex--wrap">
            <section>
              {{#if info.address}}
                <h4>address</h4>
                <p>
                  {{info.address}}
                </p>
              {{/if}}
            </section>
            <section>
              {{#if info.city}}
                <h4>city, state/territory</h4>
                <p>{{info.city}}</p>
              {{/if}}
            </section>
            <section>
              <h4>post code</h4>
              {{#if info.zipCode}}
                <p>{{info.zipCode}}</p>
              {{/if}}
            </section>
            <section>
              {{#if info.country}}
              <h4>country</h4>
              <p>{{info.country}}</p>
              {{/if}}
            </section>
          </div>
          <button class='button--blue billing-subscription__buttons' 
            onClick={{action (toggle 'openEditBillingForm' this)}} data-test-edit-billing-address='true'
          >
            Edit billing details
          </button>
        {{/if}}
      </div>
    {{/let}}
  </section>
{{/if}}
