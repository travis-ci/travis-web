<section class="dash-head {{build.state}}">
  <div class="row-content">
    <RepositoryVisibilityIcon @repository={{build.repo}} />
  </div>
</section>
<section class="dash-body">
  <section class="dash-main">
    <section class="state {{build.state}}">
      <div class="row-content">
        <StatusIcon @status={{build.state}} />
      </div>
    </section>
    <section class="repo color">
      <div class="row-content" data-test-owner>
        <LinkTo
          @route="owner"
          @model={{build.repo.owner.login}}
          class="inner-underline"
        >
          {{build.repo.owner.login}}
        </LinkTo>
      </div>
      <div class="row-content" data-test-repo-name>
        <LinkTo
          @route="repo"
          @models={{array build.repo.owner.login build.repo.name}}
          class="inner-underline"
        >
          {{build.repo.name}}
        </LinkTo>
      </div>
    </section>
    <section class="message-and-branch">
      <div
        class="message row-content"
        title={{build.commit.message}}
        data-test-commit-message
      >
        {{{format-message
          build.commit.message
          short="true"
          repo=build.repo
          eventType=build.eventType
        }}}
      </div>
      <div class="row-content no-hover">
        <ExternalLinkTo data-test-branch-name @href={{urlGitHubBranch}}>
          <EmberTooltip @text="View branch on GitHub" @popperContainer="body" />
          {{svg-jar "icon-branch" class="icon"}}
          <span class="label-align inner-underline">
            {{build.branchName}}
          </span>
          {{svg-jar "icon-external-link" class="icon"}}
        </ExternalLinkTo>
      </div>
    </section>
    <section class="state-and-sha">
      <div>
        <LinkTo
          @route="build"
          @models={{array build.repo.owner.login build.repo.name build.id}}
          data-test-state-number
          class="row-content color"
        >
          <RequestIcon @event={{build.eventType}} @state={{build.state}} />
          <span class="inner-underline">
            #
            {{build.number}}
            {{humanize-state build.state}}
          </span>
        </LinkTo>
      </div>
      <div>
        <ExternalLinkTo
          data-test-commit-sha
          @href={{build.commit.githubUrl}}
          class="row-content monospace"
        >
          <EmberTooltip @text="View commit on GitHub" />
          {{svg-jar "icon-commit" class="icon"}}
          <span class="label-align inner-underline">
            {{format-sha build.commit.sha}}
          </span>
          {{svg-jar "icon-external-link" class="icon"}}
        </ExternalLinkTo>
      </div>
    </section>
    <section class="times">
      <div
        title="{{if
            build.elapsedTime
            (concat "Started " (pretty-date build.startedAt))
          }}"
        class="commit-stopwatch row-content"
        data-test-duration
      >
        {{svg-jar "icon-stopwatch" class="icon"}}
        <span class="label-align">
          <time datetime="PT{{build.elapsedTime}}S">
            {{format-duration build.elapsedTime}}
          </time>
        </span>
      </div>
      <div class="row-content" title="{{build.finishedAt}}" data-test-finished>
        {{svg-jar "icon-calendar" class="icon"}}
        <span class="label-align">
          {{#if build.finishedAt}}
            {{format-time build.finishedAt}}
          {{else}}
            still running
          {{/if}}
        </span>
      </div>
    </section>
    <section class="restart">
      <div class="row-content">
        <RepoActions
          @build={{build}}
          @repo={{build.repo}}
          @mobilelabels={{true}}
        />
      </div>
    </section>
  </section>
</section>